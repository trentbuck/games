# I wonder how hard it is to make custom gear?
#
# My goal is to provide roughly equivalent armour and storage to this loadout:
#
#         SKINTIGHT:
#           https://cdda-guide.nornagon.net/item/nomad_bodyglove_2
#           https://cdda-guide.nornagon.net/item/helmet_liner
#           https://cdda-guide.nornagon.net/item/gloves_liner
#         NORMAL:
#           https://cdda-guide.nornagon.net/item/rm13_armor_on
#           OR
#           https://cdda-guide.nornagon.net/item/phase_immersion_suit_on
#           OR
#           https://cdda-guide.nornagon.net/item/activity_suit
#         STRAPPED:
#           https://cdda-guide.nornagon.net/item/survivor_vest
#           https://cdda-guide.nornagon.net/item/survivor_rig
#           https://cdda-guide.nornagon.net/item/survivor_belt_notools
#           OR
#           https://cdda-guide.nornagon.net/item/nomad_rig_on
#         OUTER:
#           https://cdda-guide.nornagon.net/item/trenchcoat_survivor
#           https://cdda-guide.nornagon.net/item/debug_backpack
#
# FIXME: then, merge in a bunch of utility bullshit, e.g. ZOOM from binoculars.
#
- id: nomad_bodyglove_2_twb
  type: ARMOR
  name:
    str: Zagreb armor
  symbol: "["
  color: white
  description: Looks great to you, but everyone else thinks you're naked.
  # copy-from: nomad_bodyglove_2
  looks_like:
    # Black armor, yellow faceplate
    # rm13_armor
    # GET OUT OF HERE, STALKER!
    # Navy camo, black boots/gloves, silver faceplate (https://stalker.fandom.com/wiki/SEVA_suit?)
    # robofac_enviro_suit
    # Green armor, blue faceplate/goggles, backpack, tan chest rig. https://stalker.fandom.com/wiki/Sunrise_suit
    # combat_exoskeleton_light
    # combat_exoskeleton_medium
    combat_exoskeleton_heavy
  material: [monolith]
  repairs_with: [cotton]
  weight: 1 kg
  volume: 1 L
  longest_side: 10 cm
  price: 1 USD
  material_thickness: 1

  # NOTE:
  #   typical materials:
  #     eyes:         lvl4ballisticglass thermo_resin
  #     foot_bottom:  rubber
  #     skintight:    lycra kevlar
  #     normal:       nylon nomex kevlar_layered
  #     rigid normal:
  #       carbide hyperweave_[off|on]   (RM13)
  #       carbide qt_steel superalloy   (Phase Immersion)
  #       monolith (TOO OP, EVEN FOR ME!)
  #       ceramic  (e.g. ESAPI plate inserts)
  #   overall goal is approximately (worst-median-best):
  #                    [UPS off]  [UPS on]
  #     bash:          14-22-29   20-28-34
  #     cut:           20-27-42   30-37-52
  #     pierce:        17-25-39   25-33-47
  #     ballistic:     20-26-38   32-38-50
  #     acid:          45
  #     fire:          40
  #     encumbrance:   0-20
  #     environmental: 40-80
  #     warmth:        20-40
  # https://docs.cataclysmdda.org/JSON_INFO.html#coverage
  # https://docs.cataclysmdda.org/JSON_INFO.html#breathability
  # https://cdda-guide.nornagon.net/item/armor_star_samurai_mask
  # https://old.reddit.com/r/cataclysmdda/comments/1cgkq1i/a_introductory_guide_on_armor/
  # Try to take a middle-ground between "precise but verbose" and "short but sloppy".
  # Start with a baseline covering "all" body parts, like
  #   * fabric 100% thin skintight
  #   * mail    95% flexible normal
  #   * plate   80% rigid outer
  # Additional notes:
  #   * Avoid any encumbrance for mouth (stamina) or fingertips (crafting)!
  #     Uparmor backs of hands, downarmor fingertips?
  #   * Give the eyes see-through material?
  #     (Or: claim it's using indirect vision, like
  #     https://static.wikia.nocookie.net/armedassault/images/6/66/Arma3-dlc-tanks-08.jpg
  #     or I guess fucking Iron Man.)
  #   * A lot of upstream stuff specifically gives foot bottoms less armor and more rubber. ICBF.
  # UPDATE: encumbrance got too hard and ICBF.
  environmental_protection: 60
  warmth: 30
  armor:
    - covers: [eyes, head, torso, arm_l, arm_r, leg_l, leg_r, foot_l, foot_r, head, mouth, hand_l, hand_r]
      material:
        # Bodymesh
        - {covered_by_mat: 100, thickness: 0.2, type: lycra}
        - {covered_by_mat: 100, thickness: 0.8, type: rubber}
        - {covered_by_mat: 100, thickness: 0.5, type: kevlar}
        # glove/helmet liner
        - {covered_by_mat:  10, thickness: 0.6, type: cotton}
        # RM13
        - {covered_by_mat: 100, thickness: 1.0, type: carbide}
        - {covered_by_mat: 100, thickness: 2.0, type: hyperweave_on}
        - {covered_by_mat:  10, thickness: 5.0, type: rubber}
        # Harness/Vest/Rig/Belt
        - {covered_by_mat:  10, thickness: 1.0, type: nylon}
        - {covered_by_mat:  10, thickness: 4.0, type: leather}
        - {covered_by_mat:  10, thickness: 1.0, type: canvas}
        # Trenchcoat
        - {covered_by_mat:  70, thickness: 1.5, type: canvas}
        - {covered_by_mat:  70, thickness: 1.5, type: kevlar}
      breathability: SECOND_SKIN
      volume_encumber_modifier: 0
      encumbrance: 0
      coverage: 100
      cover_vitals: 100
    # Workaround https://github.com/CleverRaven/Cataclysm-DDA/issues/77120
    # - covers: [torso]
    #   specifically_covers: [torso_neck]
    #   layers: [BELTED]
    #   coverage: 100
    #   cover_vitals: 100
    #   encumbrance: 0
    #   volume_encumber_modifier: 0
    #   breathability: SECOND_SKIN

  # https://docs.cataclysmdda.org/JSON_FLAGS.html#armor
  # https://docs.cataclysmdda.org/ARMOR_BALANCE_AND_DESIGN.html#layers
  flags:
    - ONLY_ONE
    - TRADER_AVOID
    # https://cdda-guide.nornagon.net/item/debug_backpack
    - TARDIS
    - SEMITANGIBLE
    # NOTE: I was getting "NO SHOES" penalty because I marked this armor as flags: SKINTIGHT.
    #       Adding armor: layers: [NORMAL] did not help.
    #       This is because is_wearing_shoes only looks at the item-level (not armor-level) wear layer.
    #       I initially "fixed" this with flags: [nothing, i.e. NORMAL] and armor: layers: [SKINTIGHT].
    #       This caused the wear action to place this item at the wrong layer, when worn with other gear.
    #       Later, I realized I can simply add flags: TOUGH_FEET which disables "NO SHOES" penalty.
    - SKINTIGHT
    - TOUGH_FEET
    - SOFT
    # This means if you spawn it later,
    # you also have to spawn a tailor kit and refit it.
    # Do not want.
    # - VARSIZE
    # FIXME: one of the other... do we add repairs_with, or just make it completely unbreakable?
    -
      STURDY
      # UNBREAKABLE
    # NOTE: if I allow these, then de-facto what happens is when combine with ench_climate_control_all,
    #       everything is 0 warmth except for head (20) and mouth (27).
    #       If I comment them out, everything is 0 warmth except head (-2).
    #       UPDATE: this is actually fine.  It's only doing that because it's 0 warm with climate control.
    #       If I go into a mi-go tower, where it's way too hot (>100), the head/mouth bonuses aren't added unwantedly.
    - HOOD
    - COLLAR
    - POCKETS
    # It's a wetsuit as well, I guess?
    -
      WATERPROOF
      # WATER_FRIENDLY

    -
      RAD_RESIST
      # RAD_PROOF

    # This is OP?  Move to amulet of bullshit?
    - PORTAL_PROOF

    # Rarely-relevant combat stuff
    - ALLOWS_TAIL
    - ALLOWS_TALONS
    - ALLOWS_NATURAL_ATTACKS
    - POWERARMOR_COMPATIBLE

    # NOTE: These flags give movement bonuses... but also penalties.
    #       Therefore they are a "sometimes gear".
    # - FIN
    # - FLOTATION
    # -
    #   ROLLER_INLINE
    #   # ROLLER_QUAD
    #   # ROLLER_ONE



  # FIXME: techniques: ...

  pocket_data:

    # NOTE: The idea of these is to stop newly-picked-up ammo going
    #       being automatically bundled into annoying tiny packets in
    #       cardboard boxes, glass jars, et cetera.
    #
    #       UPDATE: this is not working AFAICT,
    #               stuff still ends up in random fucking pots and cardboard boxes.
    # NOTE: these have to be separate pockets.
    #       If you say ammo_restriction: [9mm: 100, shot: 100], then
    #       you cannot have BOTH 9mm and shot in the pocket at the same time.
    - pocket_type: CONTAINER
      description: Ammo hopper (9mm NATO).
      ammo_restriction:
        9mm: 10000
      volume_encumber_modifier: 0
      weight_multiplier: 0
      moves: 1
    - pocket_type: CONTAINER
      description: Ammo hopper (5.56 NATO).
      ammo_restriction:
        '223': 10000
      volume_encumber_modifier: 0
      weight_multiplier: 0
      moves: 1
    - pocket_type: CONTAINER
      description: Ammo hopper (8mm CL).
      ammo_restriction:
        8x40mm: 10000
      volume_encumber_modifier: 0
      weight_multiplier: 0
      moves: 1
    - pocket_type: CONTAINER
      description: Ammo hopper (7.62 NATO).
      ammo_restriction:
        '308': 10000
      volume_encumber_modifier: 0
      weight_multiplier: 0
      moves: 1
    - pocket_type: CONTAINER
      description: Ammo hopper (12 gauge shot).
      ammo_restriction:
        shot: 10000
        20x66mm: 10000
      volume_encumber_modifier: 0
      weight_multiplier: 0
      moves: 1
    - pocket_type: CONTAINER
      description: Ammo hopper (40×46 mm LV).
      ammo_restriction:
        40x46mm: 10000
      volume_encumber_modifier: 0
      weight_multiplier: 0
      moves: 1
    - pocket_type: CONTAINER
      description: Quiver.
      ammo_restriction:
        arrow: 10000
        bolt: 10000
      volume_encumber_modifier: 0
      weight_multiplier: 0
      moves: 1

    # "Organization" pockets.
    # NOTE: I wanted to have a "rifle sling" and "pistol holster", but
    #       existing rifle sling pockets don't mechanically limit to firearms.
    #       All they do is set a MINIMUM volume, so the end up holding e.g. a large sandwich.
    #       This is also the case for e.g. camelbak waterskins.
    #       (There's a "water" ammo type, but it's meant for the Mi-Go gorget.)
    # NOTE: I kinda wanted these to be holsters, but then I have to create a bunch of them.
    #       It's simpler to just have one arbitrary-depth pocket auto-limited by type.
    # https://cdda-guide.nornagon.net/item/survivor_rig
    # https://cdda-guide.nornagon.net/item/survivor_vest
    # https://cdda-guide.nornagon.net/item/survivor_belt
    - pocket_type: CONTAINER
      description: Tool belt.
      volume_encumber_modifier: 0
      weight_multiplier: 0
      max_contains_volume: 100000 L
      max_contains_weight: 100000 kg
      max_item_length: 1 km
      moves: 1
      flag_restriction:
        - BELT_CLIP
    - pocket_type: CONTAINER
      description: Mêlée sheath.
      max_contains_volume: 100000 L
      max_contains_weight: 100000 kg
      max_item_length: 1 km
      volume_encumber_modifier: 0
      weight_multiplier: 0
      moves: 1
      flag_restriction:
        - SHEATH_KNIFE
        - SHEATH_SWORD
        - SHEATH_BOW
        - SHEATH_AXE
        - SHEATH_SPEAR
        - JAVELIN
    - pocket_type: CONTAINER
      description: Magazines pouch.
      volume_encumber_modifier: 0
      weight_multiplier: 0
      max_contains_volume: 100000 L
      max_contains_weight: 100000 kg
      max_item_length: 1 km
      moves: 1
      flag_restriction:
        - MAG_COMPACT
        - MAG_BULKY
        - GRENADE
        - BATTERY_HEAVY
        - BATTERY_LIGHT
        - BATTERY_MEDIUM
        - BATTERY_ULTRA_LIGHT
        - REBREATHER_CART

    # The "everything else" pocket.
    # https://cdda-guide.nornagon.net/item/debug_backpack
    # https://cdda-guide.nornagon.net/item/armor_star_samurai
    # FIXME: Make a few of these, so it can contain e.g. water and oil directly?
    #        Compare with https://cdda-guide.nornagon.net/item/feeding_kit
    # NOTE: I tried leaving off the max_contains_volume / max_contains_weight / max_item_length.
    #       This "worked" at first, but kept dropping everything out of my pockets again, including on initial character creation.
    #       Also, setting it too high seems to make it mad?
    - pocket_type: CONTAINER
      description: Tardis pocket.
      volume_encumber_modifier: 0
      weight_multiplier: 0
      max_contains_volume: 100000 L
      max_contains_weight: 100000 kg
      max_item_length: 1 km
      moves: 1
      watertight: true
      airtight: true
